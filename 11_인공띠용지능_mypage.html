<!DOCTYPE html>
<html lang="ko" id="top">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ëƒ ëƒ ë…¸íŠ¸ - ë§ˆì´í˜ì´ì§€</title>
    <link rel="stylesheet" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_NamyamNote_style.css" />
    <style>
      .follow {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #f9fafb;
        border-top: 1px solid var(--border);
        padding: 12px 8px;
      }

      .follow > div {
        flex: 1;                 
        text-align: center;
      }

      .follow-num {
        display: block;
        color: var(--text);
        font-size: 20px;
        font-weight: 800;
      }

      .follow-label {
        display: block;
        color: var(--muted);
        font-size: 13px;
      }
      .profile-box {
        display: flex;
        flex-direction: column;
        align-items: center !important;  
        text-align: center;              
      }

    </style>
  </head>
  <body>
    <script>
      /* ------------------------------
         ğŸ”¥ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
      ------------------------------ */
      document.addEventListener("DOMContentLoaded", () => {
        const currentUser = localStorage.getItem("currentUser"); // í˜„ì¬ ë¡œê·¸ì¸ ìœ ì €
        const users = JSON.parse(localStorage.getItem("users")) || {};
        const userInfo = users[currentUser];

        // ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ â†’ ë¹„ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë³´ëƒ„
        if (!currentUser || !userInfo) {
          alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ í˜ì´ì§€ì…ë‹ˆë‹¤.");
          location.href = "11_ì¸ê³µë ìš©ì§€ëŠ¥_login.html";
          return;
        }

        // ë‹‰ë„¤ì„ / ì•„ì´ë”” í‘œì‹œ
        document.querySelector(".profile-name").textContent = userInfo.nickname;
        document.querySelector(".profile-id").textContent = "@" + currentUser;

        // --- ì•„ë˜ëŠ” ê¸°ì¡´ í”„ë¡œí•„ í¸ì§‘ì—ì„œ ì €ì¥ëœ ì´ë¯¸ì§€/ì†Œê°œê¸€ ë°˜ì˜ ---
        const savedBio = localStorage.getItem("nn_bio");
        const savedProfileImg = localStorage.getItem("nn_profile_img");
        const savedBgImg = localStorage.getItem("nn_bg_img");

        if (savedBio) document.querySelector(".profile-bio").textContent = savedBio;
        if (savedProfileImg)
          document.querySelector(".profile-box img").src = savedProfileImg;
        if (savedBgImg)
          document.querySelector(".profile-cover").style.backgroundImage =
            `url('${savedBgImg}')`;

        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ê¸°ëŠ¥
        const logoutBtn = document.querySelector('a[href="#logout"]');
        if (logoutBtn) {
          logoutBtn.addEventListener("click", (e) => {
            e.preventDefault();
            if (confirm("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
              alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
              localStorage.removeItem("currentUser");
              location.href = "11_ì¸ê³µë ìš©ì§€ëŠ¥_main.html";
            }
          });
        }
      });
    </script>
    <nav class="site-nav">
  <div class="container nav-top-center">
    <div class="nav-center-box">
      <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_main.html" aria-label="ëƒ ëƒ ë…¸íŠ¸ í™ˆ">
        <img src="11_logo.png" alt="ëƒ ëƒ ë…¸íŠ¸ ë¡œê³ " class="logo" />
      </a>

      <div class="nav-search">
        <input
          type="text"
          placeholder="ì¬ë£Œëª…ìœ¼ë¡œ ë ˆì‹œí”¼ ê²€ìƒ‰"
          class="nav-search-input"
        />
        <button class="nav-search-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="7" stroke="white" stroke-width="2" />
            <line x1="16.5" y1="16.5" x2="21" y2="21" stroke="white" stroke-width="2" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="nav-menu-bar">
    <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_main.html">í™ˆ</a>
    <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_menulist.html">ë ˆì‹œí”¼</a>
    <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_register.html">ë“±ë¡</a>
    <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_rank.html">ë­í‚¹</a>
    <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_mypage.html">ë§ˆì´í˜ì´ì§€</a>
  </div>
</nav>


    <main class="container page-pad">
      <section class="profile-header">
        <div class="profile-cover" role="img"></div>
        <div class="profile-box">
          <div style="margin-top: -43px; width: 88px; height: 88px">
            <img
              src="11_circle_h_icon.png"
              alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
              style="width: 100%; height: 100%"
            />
          </div>
          <div style="text-align: center">
            <h1 class="profile-name">Haein_Cook</h1>
            <p class="profile-id">@haein_cook</p>
            <p class="profile-bio">ì•ˆë…•í•˜ì„¸ìš”!</p>
            <div style="margin-top: 20px">
              <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_edit-profile.html" class="btn-outline"
                >í”„ë¡œí•„ ìˆ˜ì •</a
              >
            </div>
          </div>
        </div>
        <div class="follow">
          <div style="text-align: center">
            <strong class="follow-num">8</strong>
            <span class="follow-label">ë‚´ ë ˆì‹œí”¼</span>
          </div>
          <div style="text-align: center">
            <strong class="follow-num">325</strong>
            <span class="follow-label">íŒ”ë¡œì‰</span>
          </div>
          <div style="text-align: center">
            <strong class="follow-num">238</strong>
            <span class="follow-label">íŒ”ë¡œì›Œ</span>
          </div>
        </div>
      </section>

      <section class="grid-2" style="gap: 24px; margin-top: 80px">
        <div class="card-box">
          <div class="bar" style="justify-content: space-between">
            <h3 class="card-title-lg">ì €ì¥í•œ ë ˆì‹œí”¼</h3>
            <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_saved_list.html" class="badge">ë”ë³´ê¸°</a>
          </div>
          <ul class="list-v" id="saved-list">
          </ul>
        </div>

        <div class="card-box">
          <div class="bar" style="justify-content: space-between">
            <h3 class="card-title-lg">ìµœê·¼ ë³¸ ë ˆì‹œí”¼</h3>
            <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_recent_list.html" class="badge">ë”ë³´ê¸°</a>
          </div>
          <ul class="list-v" id="recent-list">
          </ul>
        </div>
      </section>

      <section class="card-box" style="margin-top: 80px">
        <div class="bar" style="justify-content: space-between">
          <h3 class="card-title-lg">ë‚´ê°€ ë“±ë¡í•œ ë ˆì‹œí”¼</h3>
          <div class="btn-row">
            <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_register.html" class="btn-solid"
              >ìƒˆ ë ˆì‹œí”¼ ë“±ë¡
            </a>
            <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_recipe_manage.html" class="btn-warn">ë ˆì‹œí”¼ ê´€ë¦¬</a>


          </div>
        </div>

        <div class="card-grid my-recipes" id="my-recipes-grid">
        </div>
      </section>

      <div style="margin-top: 20px; text-align: right">
        <a href="#logout" class="btn-warn">
          <span>ë¡œê·¸ì•„ì›ƒ</span>
        </a>
      </div>

      <a href="#top" class="to-top" aria-label="ë§¨ ìœ„ë¡œ ì´ë™">ë§¨ ìœ„ë¡œ â†‘</a>
    </main>
    <script>
 
    const LOCAL_RECIPES_KEY = "nn_recipes";
    const SAVED_RECIPES_KEY = "nn_saved_recipes";
    const RECENT_RECIPES_KEY = "nn_recent_recipes";

 
    function loadLocalRecipes() {
      try {
        const raw = localStorage.getItem(LOCAL_RECIPES_KEY);
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        return Array.isArray(parsed) ? parsed : [];
      } catch (e) {
        console.error("ë‚´ ë ˆì‹œí”¼ ë¡œë“œ ì˜¤ë¥˜:", e);
        return [];
      }
    }


    function renderMyRecipeCount(list) {
      const count = list.length;
      const followNums = document.querySelectorAll(".follow-num");
      if (followNums.length > 0) {
   
        followNums[0].textContent = count;
      }
    }


    function renderMyRecipesGrid(list) {
      const grid =
        document.getElementById("my-recipes-grid") ||
        document.querySelector(".card-grid.my-recipes");
      if (!grid) return;

      if (list.length === 0) {
        grid.innerHTML =
          '<p class="card-sub muted">ì•„ì§ ë“±ë¡í•œ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤. ìƒë‹¨ì˜ "ìƒˆ ë ˆì‹œí”¼ ë“±ë¡" ë²„íŠ¼ìœ¼ë¡œ ì²« ë ˆì‹œí”¼ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>';
        return;
      }

      grid.innerHTML = list
        .map((r) => {
          const title = r.title || "ì œëª© ì—†ëŠ” ë ˆì‹œí”¼";
          const category = r.category || "ê¸°íƒ€";
          const views = r.views || 0;
          const thumb = r.image || r.thumbnail || "11_default.png";
          const link =
            "11_ì¸ê³µë ìš©ì§€ëŠ¥_recipe.html?id=" +
            encodeURIComponent(String(r.id));

          return `
            <a href="${link}" class="card">
              <img src="${thumb}" alt="${title}" class="thumb" />
              <div>
                <p class="card-title">${title}</p>
                <p class="card-sub">${category} Â· ì¡°íšŒìˆ˜ ${views}</p>
              </div>
            </a>
          `;
        })
        .join("");
    }

    function renderSavedList() {
      const savedListContainer = document.getElementById("saved-list");
      if (!savedListContainer) return;

      const savedRecipes =
        JSON.parse(localStorage.getItem(SAVED_RECIPES_KEY)) || [];

      if (savedRecipes.length === 0) {
        savedListContainer.innerHTML =
          '<li style="padding:20px; text-align:center; color:#999;">ì €ì¥ëœ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
      } else {
        const MAX_ITEMS = 3; // ğŸ”¹ ìµœëŒ€ 3ê°œë§Œ ë³´ì—¬ì£¼ê¸°
        const preview = savedRecipes.slice(0, MAX_ITEMS);

        savedListContainer.innerHTML = preview
          .map(
            (recipe) => `
            <li>
              <a href="${recipe.link}" class="list-item">
                <div class="list-text">
                  <p class="list-ttl">${recipe.title}</p>
                  <p class="list-sub">${recipe.subInfo || ""}</p>
                </div>
              </a>
            </li>
          `
          )
          .join("");
      }
    }


    function renderRecentList() {
      const recentListContainer = document.getElementById("recent-list");
      if (!recentListContainer) return;

      const recentRecipes =
        JSON.parse(localStorage.getItem(RECENT_RECIPES_KEY)) || [];

      if (recentRecipes.length === 0) {
        recentListContainer.innerHTML =
          '<li style="padding:20px; text-align:center; color:#999;">ìµœê·¼ ë³¸ ë ˆì‹œí”¼ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
      } else {
        const MAX_ITEMS = 3; // ğŸ”¹ ìµœëŒ€ 3ê°œë§Œ ë³´ì—¬ì£¼ê¸°
        const preview = recentRecipes.slice(0, MAX_ITEMS);

        recentListContainer.innerHTML = preview
          .map(
            (recipe) => `
            <li>
              <a href="${recipe.link}" class="list-item">
                <div class="list-text">
                  <p class="list-ttl">${recipe.title}</p>
                  <p class="list-sub">${recipe.info || ""}</p>
                </div>
              </a>
            </li>
          `
          )
          .join("");
      }
    }



document.addEventListener("DOMContentLoaded", function () {
  let myRecipes = loadLocalRecipes();
  renderMyRecipeCount(myRecipes);
  renderMyRecipesGrid(myRecipes);

  renderSavedList();
  renderRecentList();
});

  </script>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  const navInput = document.querySelector(".nav-search-input");
  const navBtn = document.querySelector(".nav-search-btn");

  if (!navInput || !navBtn) return;

  navBtn.addEventListener("click", () => {
    const kw = navInput.value.trim();
    if (!kw) {
      alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
      return;
    }

    location.href =
      "11_ì¸ê³µë ìš©ì§€ëŠ¥_search.html?keyword=" +
      encodeURIComponent(kw);
  });

  navInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") navBtn.click();
  });
});
</script>


  </body>
</html>

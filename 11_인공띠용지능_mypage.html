<!DOCTYPE html>
<html lang="ko" id="top">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>냠냠노트 - 마이페이지</title>
    <link rel="stylesheet" href="11_인공띠용지능_NamyamNote_style.css" />
    <style>
      .follow {
        display: flex;
        align-items: center;
        justify-content: space-around;
        gap: 12px;
        background: #f9fafb;
        border-top: 1px solid var(--border);
        padding: 12px 8px;
      }

      .follow-num {
        display: block;
        color: var(--text);
        font-size: 20px;
        font-weight: 800;
      }

      .follow-label {
        display: block;
        color: var(--muted);
        font-size: 13px;
      }
    </style>
  </head>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // 1. 저장된 데이터 불러오기
      const savedNickname = localStorage.getItem("nn_nickname");
      const savedUsername = localStorage.getItem("nn_username");
      const savedBio = localStorage.getItem("nn_bio");
      const savedProfileImg = localStorage.getItem("nn_profile_img");
      const savedBgImg = localStorage.getItem("nn_bg_img");

      // 2. 데이터가 있다면 화면에 반영하기
      if (savedNickname) {
        document.querySelector(".profile-name").textContent = savedNickname;
      }
      if (savedUsername) {
        document.querySelector(".profile-id").textContent = savedUsername;
      }
      if (savedBio) {
        document.querySelector(".profile-bio").textContent = savedBio;
      }
      if (savedProfileImg) {
        // 이미지 태그 찾아서 src 변경
        document.querySelector('.profile-box img').src = savedProfileImg;
      }
      if (savedBgImg) {
        // 배경 div 찾아서 style 변경
        document.querySelector('.profile-cover').style.backgroundImage = `url('${savedBgImg}')`;
      }

      // 3. 로그아웃 버튼 기능
      const logoutBtn = document.querySelector('a[href="#logout"]');
      if (logoutBtn) {
        logoutBtn.addEventListener("click", function (e) {
          e.preventDefault();
          const confirmLogout = confirm("정말 로그아웃 하시겠습니까?");
          if (confirmLogout) {
            alert("로그아웃 되었습니다.");
            // 실제로는 세션을 지우겠지만, 여기선 메인으로 이동시킵니다.
            window.location.href = "11_인공띠용지능_main.html";
          }
        });
      }
    });
</script>
    <nav class="site-nav">
      <div class="container nav-inner">
        <div class="logo-area">
          <a href="11_인공띠용지능_main.html">
            <img src="11_logo.png" alt="냠냠노트 로고" class="logo" />
          </a>
        </div>
        <div class="menu" role="navigation">
          <a class="nav-link" href="11_인공띠용지능_main.html">홈</a>
          <a class="nav-link" href="11_인공띠용지능_menulist.html">레시피</a>
          <a class="nav-link" href="11_인공띠용지능_register.html">등록</a>
          <a class="nav-link" href="11_인공띠용지능_rank.html">랭킹</a>
          <a class="active nav-link" href="11_인공띠용지능_mypage.html"
            >마이페이지</a
          >
        </div>
      </div>
    </nav>

    <main class="container page-pad">
      <section class="profile-header">
        <div class="profile-cover" role="img"></div>
        <div class="profile-box">
          <div style="margin-top: -43px; width: 88px; height: 88px">
            <img
              src="11_circle_h_icon.png"
              alt="프로필 이미지"
              style="width: 100%; height: 100%"
            />
          </div>
          <div style="text-align: center">
            <h1 class="profile-name">Haein_Cook</h1>
            <p class="profile-id">@haein_cook</p>
            <p class="profile-bio">안녕하세요!</p>
            <div style="margin-top: 20px">
              <a href="11_인공띠용지능_edit-profile.html" class="btn-outline"
                >프로필 수정</a
              >
            </div>
          </div>
        </div>
        <div class="follow">
          <div style="text-align: center">
            <strong class="follow-num">12</strong>
            <span class="follow-label">내 레시피</span>
          </div>
          <div style="text-align: center">
            <strong class="follow-num">125</strong>
            <span class="follow-label">팔로잉</span>
          </div>
          <div style="text-align: center">
            <strong class="follow-num">238</strong>
            <span class="follow-label">팔로워</span>
          </div>
        </div>
      </section>

      <section class="grid-2" style="gap: 24px; margin-top: 80px">
        <div class="card-box">
          <div class="bar" style="justify-content: space-between">
            <h3 class="card-title-lg">저장한 레시피</h3>
            <a href="#" class="badge">더보기</a>
          </div>
          <ul class="list-v" id="saved-list">
          </ul>
        </div>

        <div class="card-box">
          <div class="bar" style="justify-content: space-between">
            <h3 class="card-title-lg">최근 본 레시피</h3>
            <a href="#" class="badge">더보기</a>
          </div>
          <ul class="list-v" id="recent-list">
          </ul>
        </div>
      </section>

      <section class="card-box" style="margin-top: 80px">
        <div class="bar" style="justify-content: space-between">
          <h3 class="card-title-lg">내가 등록한 레시피</h3>
          <div class="btn-row">
            <a href="11_인공띠용지능_register.html" class="btn-solid"
              >새 레시피 등록</a
            >
            <a href="#" class="btn-warn">레시피 관리</a>
          </div>
        </div>

        <div class="card-grid my-recipes">
          <a href="11_인공띠용지능_detail_w.html" class="card">
            <img src="11_pasta.jpg" alt="정통 까르보나라" class="thumb" />
            <div>
              <p class="card-title">정통 까르보나라</p>
              <p class="card-sub">양식 · 파스타장인 · 조회수 12.3K</p>
            </div>
          </a>

          <a href="11_인공띠용지능_detail_k.html" class="card">
            <img src="11_kimchi.jpg" alt="김치볶음밥" class="thumb" />
            <div>
              <p class="card-title">김치볶음밥</p>
              <p class="card-sub">한식 · 한그릇 · 조회수 22.0K</p>
            </div>
          </a>

          <a href="11_인공띠용지능_detail_d.html" class="card">
            <img src="11_snack.jpg" alt="블론디" class="thumb" />
            <div>
              <p class="card-title">블론디</p>
              <p class="card-sub">디저트 · 베이킹러버 · 조회수 5.2K</p>
            </div>
          </a>
        </div>
      </section>

      <div style="margin-top: 20px; text-align: right">
        <a href="#logout" class="btn-warn">
          <span>로그아웃</span>
        </a>
      </div>

      <a href="#top" class="to-top" aria-label="맨 위로 이동">맨 위로 ↑</a>
    </main>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const userName = document
          .querySelector('.profile-name')
          ?.textContent.trim();
        if (userName) {
          localStorage.setItem('nn_username', userName);
        }

        // 기존 document.addEventListener("DOMContentLoaded", function () { ...  안에 추가하세요

    // --- [추가된 기능] 저장한 레시피 불러오기 ---
        const savedListContainer = document.getElementById("saved-list");
        const savedRecipes = JSON.parse(localStorage.getItem("nn_saved_recipes")) || [];

        if (savedRecipes.length === 0) {
            // 저장된 게 없을 때 표시
            savedListContainer.innerHTML = '<li style="padding:20px; text-align:center; color:#999;">저장된 레시피가 없습니다.</li>';
        } 
        else {
            // 저장된 목록 루프 돌면서 HTML 생성
            savedListContainer.innerHTML = savedRecipes.map(recipe => `
                <li>
                  <a href="${recipe.link}" class="list-item">
                  <div class="list-text">
                    <p class="list-ttl">${recipe.title}</p>
                    <p class="list-sub">${recipe.subInfo}</p>
                  </div>
                </a>
              </li>
          `).join('');
        }
      });


    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>냠냠노트 - 단짠단짠 마약 옥수수</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="11_인공띠용지능_NamyamNote_style.css" />
  </head>
  <body>
    <nav class="site-nav">
      <div class="container nav-inner">
        <div class="logo-area">
          <a href="11_인공띠용지능_main.html" class="logo">
            <img src="11_logo.png" alt="냠냠노트 로고" class="logo-img" />
          </a>
        </div>
        <div class="menu">
          <a href="11_인공띠용지능_main.html" class="nav-link">홈</a>
          <a href="11_인공띠용지능_menulist.html#korean" class="active nav-link"
            >레시피</a
          >
          <a href="11_인공띠용지능_register.html" class="nav-link">등록</a>
          <a
            href="11_인공띠용지능_rank.html#ranking"
            class="nav-link nav-active"
            >랭킹</a
          >
          <a href="11_인공띠용지능_mypage.html" class="nav-link">마이페이지</a>
        </div>
      </div>
    </nav>

    <main class="page-pad">
      <div class="container">
        <section class="hero">
          <img
            src="11_corn.jpg"
            alt="마약 옥수수 이미지"
            class="thumb"
            style="aspect-ratio: 16 / 9; object-fit: cover; height: auto"
          />
          <div>
            <h1 class="mt-20">단짠단짠 마약 옥수수</h1>
            <p class="mt-20">한번 맛보면 멈출 수 없는 중독성 강한 간식!</p>

            <div class="mt-20">
              <span
                class="badge-green"
                style="
                  background-color: #fce8c9;
                  color: #6f5a2c;
                  border-color: #f6e8c9;
                "
                >간식</span
              >
              <span>난이도: <strong>매우 쉬움 (★☆☆)</strong></span>
              <span>조리 시간: <strong>10분</strong></span>
            </div>

            <div class="rating">★★★★☆ (4.3점 / 180개 리뷰)</div>

            <div class="btn-row">
              <button class="btn-solid">
                <i class="fas fa-heart"></i> 저장하기
              </button>
              <button class="btn-outline">
                <i class="fas fa-share-alt"></i> 공유
              </button>
            </div>
          </div>
        </section>

        <div class="grid-2 gap-24 mt-80">
          <section class="card-box">
            <h2 class="card-title-lg">필수 재료</h2>
            <ul class="list-v">
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">통조림 옥수수</div>
                </div>
                <strong>1캔</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">마요네즈</div>
                </div>
                <strong>3큰술</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">설탕</div>
                </div>
                <strong>1큰술</strong>
              </li>
            </ul>
            <h3 class="section-title mt-20">양념</h3>
            <ul class="list-v">
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">소금</div>
                </div>
                <strong>약간</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">파마산 치즈 가루</div>
                </div>
                <strong>2큰술</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">고춧가루/파슬리 가루</div>
                </div>
                <strong>약간</strong>
              </li>
            </ul>
          </section>

          <section class="card-box">
            <h2 class="card-title-lg">조리 과정</h2>
            <ol class="list-v">
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">1. 재료 준비</div>
                  <div class="list-sub">
                    체에 밭쳐 통조림 옥수수 물기를 완전히 제거합니다.
                  </div>
                </div>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">2. 옥수수 볶기</div>
                  <div class="list-sub">
                    팬에 물기 뺀 옥수수를 넣고 중불에서 볶아 수분을 날려줍니다.
                  </div>
                </div>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">3. 양념 넣고 볶기</div>
                  <div class="list-sub">
                    마요네즈, 설탕, 소금, 고춧가루를 넣고 옥수수 알갱이가
                    노릇해질 때까지 볶아줍니다.
                  </div>
                </div>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">4. 완성</div>
                  <div class="list-sub">
                    불을 끄고 파마산 치즈 가루를 듬뿍 뿌려 잘 섞습니다. 그릇에
                    담고 파슬리 가루를 뿌려 마무리합니다.
                  </div>
                </div>
              </li>
            </ol>
          </section>
        </div>

        <section class="card-box mt-80">
          <h2 class="card-title-lg">리뷰 (180)</h2>
          <div class="review-area">
            <div class="review-input-box">
              <textarea
                placeholder="이 레시피에 대한 당신의 리뷰를 남겨주세요!"
                class="input-text"
              ></textarea>
              <div class="btn-row between">
                <div class="rating-stars">
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                </div>
                <button class="btn-solid">리뷰 등록</button>
              </div>
            </div>

            <div class="review-list">
              <article class="card">
                <div class="bar between">
                  <span class="card-title">간식없으면못살아</span>
                  <span class="rating">★★★★★</span>
                </div>
                <p class="my-recipes card-sub">
                  영화 볼 때 필수 간식이 됐어요! 고춧가루 넣었더니 매콤한 맛이
                  더해져서 더 맛있네요!
                </p>
                <span class="my-recipes card-sub right">2024.10.03</span>
              </article>
              <article class="card">
                <div class="bar between">
                  <span class="card-title">단짠단짠장인</span>
                  <span class="rating">★★★★☆</span>
                </div>
                <p class="my-recipes card-sub">
                  정말 중독성 강한 맛입니다. 개인적으로 버터를 살짝 넣고
                  볶아주면 풍미가 더 좋아져요.
                </p>
                <span class="my-recipes card-sub right">2024.09.29</span>
              </article>
            </div>
          </div>
        </section>
      </div>
    </main>

    <a href="#top" class="to-top">맨 위로 ↑</a>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const stars = document.querySelectorAll('.rating-stars i');
        const reviewBtn = document.querySelector(
          '.review-input-box .btn-solid'
        );
        const reviewInput = document.querySelector('.input-text');
        const reviewList = document.querySelector('.review-list');
        const inputBox = document.querySelector('.review-input-box');
        const userName =
          localStorage.getItem('nn_username')?.trim() || '익명 사용자';

        let currentRating = 0;
        let editingReview = null;

        stars.forEach((star, index) => {
          star.addEventListener('click', () => {
            currentRating = index + 1;
            updateStars();
          });
          star.addEventListener('mouseover', () => {
            highlightStars(index + 1);
          });
          star.addEventListener('mouseout', () => {
            updateStars();
          });
        });

        function highlightStars(count) {
          stars.forEach((star, idx) => {
            const active = idx < count;
            star.classList.toggle('fas', active);
            star.classList.toggle('far', !active);
            star.style.color = active ? '#e2b458' : '#ccc';
          });
        }

        function updateStars() {
          stars.forEach((star, idx) => {
            const active = idx < currentRating;
            star.classList.toggle('fas', active);
            star.classList.toggle('far', !active);
            star.style.color = active ? '#e2b458' : '#ccc';
          });
        }

        reviewBtn.addEventListener('click', () => {
          const text = reviewInput.value.trim();
          if (!text || currentRating === 0)
            return alert('리뷰와 별점을 입력해주세요!');

          if (editingReview) {
            editingReview.querySelector('.card-sub').textContent = text;
            editingReview.querySelector('.rating').textContent =
              '★'.repeat(currentRating) + '☆'.repeat(5 - currentRating);

            editingReview = null;
            reviewBtn.textContent = '리뷰 등록';
            reviewInput.value = '';
            currentRating = 0;
            updateStars();
            return;
          }

          const today = new Date();
          const dateStr =
            today.getFullYear() +
            '.' +
            String(today.getMonth() + 1).padStart(2, '0') +
            '.' +
            String(today.getDate()).padStart(2, '0');

          const ratingStars =
            '★'.repeat(currentRating) + '☆'.repeat(5 - currentRating);

          const newReview = document.createElement('article');
          newReview.classList.add('card');

          newReview.innerHTML = `
      <div class="bar between">
        <span class="card-title">${userName}</span>
        <span class="rating">${ratingStars}</span>
      </div>

      <p class="my-recipes card-sub">${text}</p>
      <span class="my-recipes card-sub right">${dateStr}</span>

      <div class="review-btns">
        <button class="btn-outline btn-edit">수정</button>
        <button class="btn-warn btn-delete">삭제</button>
      </div>
    `;

          reviewList.insertAdjacentElement('afterbegin', newReview);

          reviewInput.value = '';
          currentRating = 0;
          updateStars();
        });

        reviewList.addEventListener('click', (e) => {
          const card = e.target.closest('.card');
          if (!card) return;

          if (e.target.classList.contains('btn-delete')) {
            if (confirm('정말 삭제하시겠습니까?')) card.remove();
            return;
          }

          if (e.target.classList.contains('btn-edit')) {
            editingReview = card;
            const text = card.querySelector('.card-sub').textContent;
            const starsText = card.querySelector('.rating').textContent;

            currentRating = starsText.replace(/☆/g, '').length;

            reviewInput.value = text;
            reviewBtn.textContent = '리뷰 수정 완료';
            updateStars();

            inputBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        });
      });
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë ˆì‹œí”¼ ê²€ìƒ‰ ê²°ê³¼</title>
  <link rel="stylesheet" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_NamyamNote_style.css">

  <style>
    .search-title { 
      font-size: 1.8rem; 
      font-weight: 700; 
      margin-top: 40px; 
    }
    .card-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
      gap: 20px; 
      margin-top: 30px; 
    }
    .card {
      background: #fff;
      border-radius: 16px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      text-decoration: none;
      color: #333;
      transition: transform .15s;
    }
    .card:hover {
      transform: translateY(-4px);
    }
    .card img { 
      width: 100%; 
      border-radius: 12px; 
    }
    .card-title { 
      font-weight: 700; 
      margin-top: 10px; 
      font-size: 1.1rem;
    }
    .no-result { 
      margin-top: 40px; 
      font-size: 1.2rem; 
      color: #777; 
    }
  </style>
</head>

<body class="container">

  <h1 class="search-title">ê²€ìƒ‰ ê²°ê³¼</h1>

  <div id="search-result" class="card-grid"></div>

  <script>
    // URLì—ì„œ ê²€ìƒ‰ì–´ ì¶”ì¶œ
    const params = new URLSearchParams(window.location.search);
    const keyword = params.get("keyword")?.trim() ?? "";

    const resultBox = document.getElementById("search-result");

    // ğŸ”¥ JSON ë¶ˆëŸ¬ì˜¤ê¸°
    fetch("11_ì¸ê³µë ìš©ì§€ëŠ¥_recipes.json")
      .then(res => res.json())
      .then(data => {
        // JSON êµ¬ì¡°: { "recipes": [...] }
        const recipes = data.recipes;

        const found = filterRecipes(recipes, keyword);

        if (found.length === 0) {
          resultBox.innerHTML = `<p class="no-result">"${keyword}" ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
        } else {
          resultBox.innerHTML = found.map(r => `
            <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_recipe.html?id=${r.id}" class="card">

              <img src="${r.thumbnail}" alt="${r.title}">
              <p class="card-title">${r.title}</p>
              <div class="rating">â­ ${r.rating}</div>
            </a>
          `).join("");
        }
      })
      .catch(err => {
        console.error("JSON ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:", err);
        resultBox.innerHTML = `<p class="no-result">ë ˆì‹œí”¼ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>`;
      });

    // ğŸ” ê²€ìƒ‰ í•¨ìˆ˜
    function filterRecipes(recipes, keyword) {
      const lower = keyword.toLowerCase();

      return recipes.filter(recipe => {
        return (
          recipe.title.toLowerCase().includes(lower) ||
          recipe.category.toLowerCase().includes(lower) ||
          recipe.ingredients_required.some(i => i.name.toLowerCase().includes(lower))
        );
      });
    }
  </script>

</body>
</html>

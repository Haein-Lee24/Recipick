<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ëƒ ëƒ ë…¸íŠ¸ - ì–‘ì‹ ë ˆì‹œí”¼ ì „ì²´</title>
    <link rel="stylesheet" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_NamyamNote_style.css" />
    <style>
      header {
        background: var(--card-bg);
        border-bottom: 1px solid var(--border);
      }
      .header-container {
        max-width: 1080px;
        margin: 0 auto;
        padding: 32px 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .header-container h1 {
        font-size: 24px;
        font-weight: 800;
        color: var(--text);
        letter-spacing: -0.2px;
        margin: 0;
      }
      .header-container span {
        font-size: 14px;
        color: var(--muted);
      }
      select {
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 8px 10px;
        font-size: 14px;
        background: var(--card-bg);
        color: var(--text);
      }

      main {
        max-width: 1080px;
        margin: 0 auto;
        padding: 24px 16px;
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
      }
      @media (min-width: 640px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (min-width: 920px) {
        .grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }
      @media (min-width: 1040px) {
        .grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }

      .card {
        background: var(--card-bg);
        border-radius: 14px;
        overflow: hidden;
        box-shadow: var(--shadow);
        text-decoration: none;
        color: inherit;
        transition: transform 0.2s, box-shadow 0.2s;
        border: 1px solid var(--border);
        padding: 12px;
      }
      .card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }
      .card-thumb {
        width: 100%;
        height: 132px;
        background-size: cover;
        background-position: center;
        border-radius: 10px;
        display: block;
        margin-bottom: 8px;
      }
      .card-body {
        padding: 0 4px;
      }
      .card-title {
        font-weight: 700;
        color: var(--text);
        margin: 0 0 4px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: 16px;
      }
      .card-body p {
        margin: 0 0 4px;
        font-size: 12px;
        color: var(--muted);
      }
      .rating {
        margin-top: 4px;
        font-size: 14px;
        color: #e2b458;
      }

      .back-btn,
      .top-btn {
        position: fixed;
        bottom: 16px;
        z-index: 50;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 999px;
        background: var(--primary-color);
        color: #fff;
        box-shadow: var(--shadow);
        text-decoration: none;
        font-size: 14px;
        opacity: 0.9;
        transition: opacity 0.2s;
      }
      .back-btn:hover,
      .top-btn:hover {
        opacity: 1;
      }
      .back-btn {
        left: 16px;
      }
      .top-btn {
        right: 16px;
        background: var(--primary-color);
      }

      footer {
        max-width: 1080px;
        margin: 40px auto 20px;
        color: var(--muted);
        text-align: center;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <span id="top"></span>

    <nav class="site-nav">
      <div class="container nav-inner">
        <div class="logo-area">
          <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_main.html" aria-label="ëƒ ëƒ ë…¸íŠ¸ í™ˆ">
            <img src="11_logo.png" alt="ëƒ ëƒ ë…¸íŠ¸ ë¡œê³ " class="logo" />
          </a>
        </div>
        <div class="menu" role="navigation" aria-label="ì£¼ìš” ë©”ë‰´">
          <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_main.html">í™ˆ</a>
          <a
            class="active nav-link"
            href="11_ì¸ê³µë ìš©ì§€ëŠ¥_menulist.html#western"
            >ë ˆì‹œí”¼</a
          >
          <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_register.html">ë“±ë¡</a>
          <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_rank.html#ranking">ë­í‚¹</a>
          <a class="nav-link" href="11_ì¸ê³µë ìš©ì§€ëŠ¥_mypage.html">ë§ˆì´í˜ì´ì§€</a>
        </div>
      </div>
    </nav>

    <header>
      <div class="header-container">
        <!-- data-base-count ë¡œ ê¸°ë³¸ ê°œìˆ˜(ê¸°ì¡´ ì¹´ë“œ ìˆ˜) ì €ì¥ -->
        <h1>
          ì–‘ì‹ ë ˆì‹œí”¼ ì „ì²´
          <span id="totalCount" data-base-count="15">(ì´ 15ê°œ)</span>
        </h1>
        <div class="sort">
          <label style="font-size: 0.9rem; color: var(--muted)">ì •ë ¬</label>
          <select aria-label="ì •ë ¬ ê¸°ì¤€ ì„ íƒ">
            <option>ë³„ì ìˆœ</option>
            <option>ìµœì‹ ë“±ë¡ìˆœ</option>
            <option>ì¡°íšŒìˆœ</option>
          </select>
        </div>
      </div>
    </header>

    <main>
      <!-- ğŸ”¹ ê¸°ì¡´ ì •ì ì¸ ì¹´ë“œë“¤ -->
      <div class="grid">
        <a href="recipe.html?recipe=carbonara" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ì •í†µ ê¹Œë¥´ë³´ë‚˜ë¼</h3>
            <p>ì‘ì„±ì: íŒŒìŠ¤íƒ€ì¥ì¸ Â· ì¡°íšŒìˆ˜: 12.3K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜… (4.9)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=garlic_shrimp_pasta" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ê°ˆë¦­ ì‰¬ë¦¼í”„ íŒŒìŠ¤íƒ€</h3>
            <p>ì‘ì„±ì: ì‰¬ìš´ìš”ë¦¬ Â· ì¡°íšŒìˆ˜: 9.8K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.5)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=margherita_pizza" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ë§ˆë¥´ê²Œë¦¬íƒ€ í”¼ì</h3>
            <p>ì‘ì„±ì: í™”ë•ì˜ì •ì„ Â· ì¡°íšŒìˆ˜: 14.0K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜… (4.8)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=bolognese_pasta" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ë³¼ë¡œë„¤ì œ íŒŒìŠ¤íƒ€</h3>
            <p>ì‘ì„±ì: ë¯¸íŠ¸ì†ŒìŠ¤ëŸ¬ë²„ Â· ì¡°íšŒìˆ˜: 8.7K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.2)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=alfredo_pasta" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ì•Œí”„ë ˆë„ í¬ë¦¼íŒŒìŠ¤íƒ€</h3>
            <p>ì‘ì„±ì: í¬ë¦¬ë¯¸ Â· ì¡°íšŒìˆ˜: 7.1K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.3)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=steak" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ìŠ¤í…Œì´í¬</h3>
            <p>ì‘ì„±ì: ë¯¸ë””ì›€ë ˆì–´ Â· ì¡°íšŒìˆ˜: 16.2K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜… (4.8)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=lasagna" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ë¼ìëƒ</h3>
            <p>ì‘ì„±ì: ì˜¤ë¸ìš”ë¦¬ Â· ì¡°íšŒìˆ˜: 6.5K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.4)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=mushroom_risotto" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ë²„ì„¯ ë¦¬ì¡°ë˜</h3>
            <p>ì‘ì„±ì: ì´íƒˆë¦¬ì•ˆí™ˆ Â· ì¡°íšŒìˆ˜: 5.4K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.2)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=greek_salad" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ê·¸ë¦­ ìƒëŸ¬ë“œ</h3>
            <p>ì‘ì„±ì: ìƒëŸ¬ë””ìŠ¤íŠ¸ Â· ì¡°íšŒìˆ˜: 7.9K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.3)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=fish_and_chips" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">í”¼ì‹œì•¤ì¹©ìŠ¤</h3>
            <p>ì‘ì„±ì: ë¸Œë¦¬í‹°ì‹œí™ˆ Â· ì¡°íšŒìˆ˜: 4.4K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.1)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=homemade_burger" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ìˆ˜ì œ ë²„ê±°</h3>
            <p>ì‘ì„±ì: ê·¸ë¦´ë§ˆìŠ¤í„° Â· ì¡°íšŒìˆ˜: 13.0K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.5)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=clam_chowder" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">í´ë¨ ì°¨ìš°ë”</h3>
            <p>ì‘ì„±ì: ë³´ìŠ¤í„´ê°€ì •ì‹ Â· ì¡°íšŒìˆ˜: 3.8K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.2)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=penne_arrabbiata" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">íœë„¤ ì•„ë¼ë¹„ì•„ë”°</h3>
            <p>ì‘ì„±ì: ë§¤ì½¤í•œíŒŒìŠ¤íƒ€ Â· ì¡°íšŒìˆ˜: 7.4K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.3)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=chicken_parmesan" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ì¹˜í‚¨ íŒŒë¥´ë¯¸ì§€ì•„ë‚˜</h3>
            <p>ì‘ì„±ì: ì˜¤ë¸ë§ˆìŠ¤í„° Â· ì¡°íšŒìˆ˜: 10.1K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜… (4.7)</div>
          </div>
        </a>

        <a href="recipe.html?recipe=shrimp_scampi" class="card">
          <div
            class="card-thumb"
            style="background-image: url('11_pasta.jpg')"
          ></div>
          <div class="card-body">
            <h3 class="card-title">ì‰¬ë¦¼í”„ ìŠ¤ìº„í”¼</h3>
            <p>ì‘ì„±ì: ì”¨í‘¸ë“œëŸ¬ë²„ Â· ì¡°íšŒìˆ˜: 8.6K</p>
            <div class="rating">â˜…â˜…â˜…â˜…â˜† (4.5)</div>
          </div>
        </a>
      </div>
    </main>

    <a href="11_ì¸ê³µë ìš©ì§€ëŠ¥_menulist.html#western" class="back-btn"
      >ì¹´í…Œê³ ë¦¬ë³„ ë ˆì‹œí”¼ ë³´ê¸°</a
    >
    <a href="#top" class="top-btn" aria-label="ë§¨ ìœ„ë¡œ ì´ë™">ë§¨ ìœ„ë¡œ â†‘</a>

    <!-- ğŸ”½ ì—¬ê¸°ë¶€í„° JS: localStorageì—ì„œ 'ì–‘ì‹' ë ˆì‹œí”¼ ë¶ˆëŸ¬ì™€ì„œ ì¶”ê°€ -->
    <script>
      const STORAGE_KEY = 'nn_recipes'; // register.jsì™€ ë™ì¼

      function loadUserRecipes() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          console.log('[western] raw from localStorage:', raw);
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          console.error('[western] JSON íŒŒì‹± ì˜¤ë¥˜:', e);
          return [];
        }
      }

      function getDefaultImage(category) {
        switch (category) {
          case 'í•œì‹':
            return '11_kimchi.jpg';
          case 'ì–‘ì‹':
            return '11_pasta.jpg';
          case 'ì¤‘ì‹':
            return '11_chinese.png';
          case 'ë””ì €íŠ¸':
            return '11_snack.jpg';
          case 'ìŒë£Œ':
            return '11_drink.png';
          default:
            return '11_pasta.jpg';
        }
      }

      function createRecipeCard(recipe) {
        const a = document.createElement('a');
        a.className = 'card';
        a.href = '#'; // í•„ìš”í•˜ë©´ ë‚˜ì¤‘ì— ìƒì„¸í˜ì´ì§€ ë§í¬ë¡œ ë³€ê²½

        const imgUrl =
          recipe.imageUrl || recipe.image || getDefaultImage(recipe.category);

        const rating =
          typeof recipe.rating === 'number'
            ? recipe.rating.toFixed(1)
            : (recipe.rating || 0).toString();

        a.innerHTML = `
          <div class="card-thumb" style="background-image:url('${imgUrl}')"></div>
          <div class="card-body">
            <h3 class="card-title">${recipe.title}</h3>
            <p>ì‘ì„±ì: ${recipe.author || 'ì‚¬ìš©ì'} Â· ì¡°íšŒìˆ˜: ${recipe.views || 0}</p>
            <div class="rating">â˜… ${rating}</div>
          </div>
        `;

        return a;
      }

      // ğŸ”¥ ìŠ¤í¬ë¦½íŠ¸ê°€ HTML ëì— ìˆì–´ì„œ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥
      (function () {
        const CATEGORY = 'ì–‘ì‹';

        const grid = document.querySelector('.grid');
        if (!grid) {
          console.warn('[western] .gridë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
          return;
        }

        const all = loadUserRecipes();
        console.log('[western] ì „ì²´ ë ˆì‹œí”¼:', all);

        const westernRecipes = all.filter((r) => r.category === CATEGORY);
        console.log('[western] ì–‘ì‹ ë ˆì‹œí”¼:', westernRecipes);

        if (westernRecipes.length === 0) {
          console.log('[western] ì–‘ì‹ ì‚¬ìš©ì ë ˆì‹œí”¼ ì—†ìŒ');
        }

        westernRecipes.forEach((recipe) => {
          const card = createRecipeCard(recipe);
          grid.appendChild(card);
        });

        const span = document.getElementById('totalCount');
        if (span) {
          const base = Number(span.dataset.baseCount || '0');
          const total = base + westernRecipes.length;
          span.textContent = `(ì´ ${total}ê°œ)`;
          console.log(
            `[western] base=${base}, ì¶”ê°€=${westernRecipes.length}, total=${total}`
          );
        } else {
          console.warn('[western] #totalCount ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
        }
      })();
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>냠냠노트 - 초간단 샐러드 파스타</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="11_인공띠용지능_NamyamNote_style.css" />
  </head>
  <body>
    <nav class="site-nav">
      <div class="container nav-inner">
        <div class="logo-area">
          <a href="11_인공띠용지능_main.html" class="logo">
            <img src="11_logo.png" alt="냠냠노트 로고" class="logo-img" />
          </a>
        </div>
        <div class="menu">
          <a href="11_인공띠용지능_main.html" class="nav-link">홈</a>
          <a href="11_인공띠용지능_menulist.html#korean" class="active nav-link"
            >레시피</a
          >
          <a href="11_인공띠용지능_register.html" class="nav-link">등록</a>
          <a
            href="11_인공띠용지능_rank.html#ranking"
            class="nav-link nav-active"
            >랭킹</a
          >
          <a href="11_인공띠용지능_mypage.html" class="nav-link">마이페이지</a>
        </div>
      </div>
    </nav>

    <main class="page-pad">
      <div class="container">
        <section class="hero">
          <img
            src="11_saladpasta.jpg"
            alt="샐러드 파스타 이미지"
            class="thumb"
            style="aspect-ratio: 16 / 9; object-fit: cover; height: auto"
          />
          <div>
            <h1 class="mt-20">5분 완성! 초간단 샐러드 파스타</h1>
            <p class="mt-20">
              바쁜 일상 속 가볍게 즐기는 한 끼! 다이어트에도 좋아요!
            </p>

            <div class="mt-20">
              <span class="badge-green">다이어트</span>
              <span>난이도: <strong>매우 쉬움 (★☆☆)</strong></span>
              <span>조리 시간: <strong>5분</strong></span>
            </div>

            <div class="rating">★★★★★ (4.9점 / 310개 리뷰)</div>

            <div class="btn-row">
              <button class="btn-solid">
                <i class="fas fa-heart"></i> 저장하기
              </button>
              <button class="btn-outline">
                <i class="fas fa-share-alt"></i> 공유
              </button>
            </div>
          </div>
        </section>

        <div class="grid-2 gap-24 mt-80">
          <section class="card-box">
            <h2 class="card-title-lg">필수 재료</h2>
            <ul class="list-v">
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">파스타 (푸실리/펜네)</div>
                </div>
                <strong>150g</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">어린잎 채소</div>
                </div>
                <strong>1줌</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">방울토마토</div>
                </div>
                <strong>10개</strong>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">오리엔탈 드레싱</div>
                </div>
                <strong>4큰술</strong>
              </li>
            </ul>
            <h3 class="section-title mt-20">양념</h3>
            <ul class="list-v">
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">파마산 치즈 가루</div>
                </div>
                <strong>약간</strong>
              </li>
            </ul>
          </section>

          <section class="card-box">
            <h2 class="card-title-lg">조리 과정</h2>
            <ol class="list-v">
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">1. 파스타 삶기</div>
                  <div class="list-sub">
                    끓는 물에 소금을 약간 넣고 파스타를 삶아줍니다. (봉투에 적힌
                    시간 참고)
                  </div>
                </div>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">2. 재료 준비</div>
                  <div class="list-sub">
                    파스타가 다 익으면 찬물에 헹군 뒤 물기를 완전히 빼줍니다.
                    깨끗이 씻은 어린잎 채소와 방울토마토를 준비합니다.
                  </div>
                </div>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">3. 모두 섞기</div>
                  <div class="list-sub">
                    큰 볼에 삶은 파스타, 채소, 토마토를 넣고 오리엔탈 드레싱을
                    넣어 잘 버무려줍니다.
                  </div>
                </div>
              </li>
              <li class="list-item">
                <div class="list-text">
                  <div class="list-ttl">4. 완성</div>
                  <div class="list-sub">
                    접시에 담고 파마산 치즈 가루를 뿌려 완성합니다.
                  </div>
                </div>
              </li>
            </ol>
          </section>
        </div>

        <section class="card-box mt-80">
          <h2 class="card-title-lg">리뷰 (310)</h2>
          <div class="review-area">
            <div class="review-input-box">
              <textarea
                placeholder="이 레시피에 대한 당신의 리뷰를 남겨주세요!"
                class="input-text"
              ></textarea>
              <div class="btn-row between">
                <div class="rating-stars">
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                </div>
                <button class="btn-solid">리뷰 등록</button>
              </div>
            </div>

            <div class="review-list">
              <article class="card">
                <div class="bar between">
                  <span class="card-title">다이어터김씨</span>
                  <span class="rating">★★★★★</span>
                </div>
                <p class="my-recipes card-sub">
                  샐러드 드레싱만 바꿔가며 매일 먹고 있어요. 레시피 덕분에
                  질리지 않고 즐기고 있습니다!
                </p>
                <span class="my-recipes card-sub right">2024.10.07</span>
              </article>
              <article class="card">
                <div class="bar between">
                  <span class="card-title">급할땐이거</span>
                  <span class="rating">★★★★★</span>
                </div>
                <p class="my-recipes card-sub">
                  진짜 5분이면 만들 수 있어서 점심시간에 최고예요. 남은 파스타
                  활용하기도 좋네요.
                </p>
                <span class="my-recipes card-sub right">2024.10.04</span>
              </article>
            </div>
          </div>
        </section>
      </div>
    </main>

    <a href="#top" class="to-top">맨 위로 ↑</a>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const stars = document.querySelectorAll('.rating-stars i');
        const reviewBtn = document.querySelector(
          '.review-input-box .btn-solid'
        );
        const reviewInput = document.querySelector('.input-text');
        const reviewList = document.querySelector('.review-list');
        const inputBox = document.querySelector('.review-input-box');
        const userName =
          localStorage.getItem('nn_username')?.trim() || '익명 사용자';

        let currentRating = 0;
        let editingReview = null;

        stars.forEach((star, index) => {
          star.addEventListener('click', () => {
            currentRating = index + 1;
            updateStars();
          });
          star.addEventListener('mouseover', () => {
            highlightStars(index + 1);
          });
          star.addEventListener('mouseout', () => {
            updateStars();
          });
        });

        function highlightStars(count) {
          stars.forEach((star, idx) => {
            const active = idx < count;
            star.classList.toggle('fas', active);
            star.classList.toggle('far', !active);
            star.style.color = active ? '#e2b458' : '#ccc';
          });
        }

        function updateStars() {
          stars.forEach((star, idx) => {
            const active = idx < currentRating;
            star.classList.toggle('fas', active);
            star.classList.toggle('far', !active);
            star.style.color = active ? '#e2b458' : '#ccc';
          });
        }

        reviewBtn.addEventListener('click', () => {
          const text = reviewInput.value.trim();
          if (!text || currentRating === 0)
            return alert('리뷰와 별점을 입력해주세요!');

          if (editingReview) {
            editingReview.querySelector('.card-sub').textContent = text;
            editingReview.querySelector('.rating').textContent =
              '★'.repeat(currentRating) + '☆'.repeat(5 - currentRating);

            editingReview = null;
            reviewBtn.textContent = '리뷰 등록';
            reviewInput.value = '';
            currentRating = 0;
            updateStars();
            return;
          }

          const today = new Date();
          const dateStr =
            today.getFullYear() +
            '.' +
            String(today.getMonth() + 1).padStart(2, '0') +
            '.' +
            String(today.getDate()).padStart(2, '0');

          const ratingStars =
            '★'.repeat(currentRating) + '☆'.repeat(5 - currentRating);

          const newReview = document.createElement('article');
          newReview.classList.add('card');

          newReview.innerHTML = `
      <div class="bar between">
        <span class="card-title">${userName}</span>
        <span class="rating">${ratingStars}</span>
      </div>

      <p class="my-recipes card-sub">${text}</p>
      <span class="my-recipes card-sub right">${dateStr}</span>

      <div class="review-btns">
        <button class="btn-outline btn-edit">수정</button>
        <button class="btn-warn btn-delete">삭제</button>
      </div>
    `;

          reviewList.insertAdjacentElement('afterbegin', newReview);

          reviewInput.value = '';
          currentRating = 0;
          updateStars();
        });

        reviewList.addEventListener('click', (e) => {
          const card = e.target.closest('.card');
          if (!card) return;

          if (e.target.classList.contains('btn-delete')) {
            if (confirm('정말 삭제하시겠습니까?')) card.remove();
            return;
          }

          if (e.target.classList.contains('btn-edit')) {
            editingReview = card;
            const text = card.querySelector('.card-sub').textContent;
            const starsText = card.querySelector('.rating').textContent;

            currentRating = starsText.replace(/☆/g, '').length;

            reviewInput.value = text;
            reviewBtn.textContent = '리뷰 수정 완료';
            updateStars();

            inputBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        });
      });
    </script>
  </body>
</html>
